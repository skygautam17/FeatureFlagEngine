<div class="container mt-4">

  <h2 class="mb-3">Features</h2>

  <!-- Create Feature Form -->
  <div class="card mb-4 shadow-sm">
    <div class="card-body">

      <div class="row g-2 align-items-center">

        <div class="col-md-4">
          <input
            class="form-control"
            [(ngModel)]="newFeature.key"
            placeholder="Feature Key"
          />
        </div>

        <div class="col-md-4">
          <input
            class="form-control"
            [(ngModel)]="newFeature.description"
            placeholder="Feature Description"
          />
        </div>

        <div class="col-md-2 form-check mt-2">
          <input
            type="checkbox"
            class="form-check-input"
            [(ngModel)]="newFeature.enabled"
            id="enabledCheck"
          />
          <label class="form-check-label" for="enabledCheck">
            Enabled
          </label>
        </div>

        <div class="col-md-2">
          <button class="btn btn-primary w-100" (click)="create()">
            Add
          </button>
        </div>

      </div>

    </div>
  </div>

  <!-- Features Table -->
  <div class="card shadow-sm">
    <div class="card-body p-0">

      <table class="table table-striped table-hover mb-0">
        <thead class="table-dark">
          <tr>
            <th>Key</th>
            <th>Description</th>
            <th>Enabled</th>
            <th style="width:120px;">Actions</th>
          </tr>
        </thead>

        <tbody>
  <tr *ngFor="let f of features">

    <!-- Key -->
    <td>
      <input *ngIf="f.isEditing"
             class="form-control"
             [(ngModel)]="f.key" />

      <span *ngIf="!f.isEditing">
        {{f.key}}
      </span>
    </td>

    <!-- Description -->
    <td>
      <input *ngIf="f.isEditing"
             class="form-control"
             [(ngModel)]="f.description" />

      <span *ngIf="!f.isEditing">
        {{f.description}}
      </span>
    </td>

    <!-- Enabled -->
    <td>
      <div *ngIf="f.isEditing">
        <input type="checkbox" [(ngModel)]="f.enabled" />
      </div>

      <span *ngIf="!f.isEditing"
            class="badge"
            [ngClass]="f.enabled ? 'bg-success' : 'bg-secondary'">
        {{ f.enabled ? 'Enabled' : 'Disabled' }}
      </span>
    </td>

    <!-- Actions -->
    <td>
  <!-- Editing Mode -->
  <div *ngIf="f.isEditing" class="d-flex gap-2">
    <button class="btn btn-sm btn-success"
            (click)="update(f)">
      Save
    </button>

    <button class="btn btn-sm btn-secondary"
            (click)="cancelEdit(f)">
      Cancel
    </button>
  </div>

  <!-- Normal Mode -->
  <div *ngIf="!f.isEditing" class="d-flex gap-2">
    <button class="btn btn-sm btn-warning"
            (click)="edit(f)">
      Edit
    </button>

    <button class="btn btn-sm btn-danger"
            (click)="delete(f.id)">
      Delete
    </button>
  </div>
</td>


  </tr>
</tbody>


      </table>

    </div>
  </div>

</div>
